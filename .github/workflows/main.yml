name: CI

on:
  push:
    branches: 
      - master

jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install R
      run: |
        sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9
        sudo add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu bionic-cran35/'
        sudo apt update
        sudo apt install -y r-base
    - name: Install base dependencies
      run: sudo apt-get update && sudo apt-get install -y build-essential && sudo apt-get install -y libcurl4-gnutls-dev && sudo apt-get install -y libxml2-dev && sudo apt-get install -y libssl-dev
    - name: Install needed packages
      run: |
        sudo Rscript -e "install.packages('devtools')"
        sudo Rscript -e "install.packages('tidyverse')"
        sudo Rscript -e "devtools::install_github('jpmarindiaz/mop')"
        sudo Rscript -e "devtools::install_github('bergant/airtabler')"
